<!doctype html>
<html lang="en">
 <head>
  <!-- à¸ªà¹ˆà¸§à¸™à¸«à¸±à¸§à¸‚à¸­à¸‡à¹€à¸­à¸à¸ªà¸²à¸£ HTML -->
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Neon Snake Game</title>
  
  <!-- à¹‚à¸«à¸¥à¸”à¹„à¸¥à¸šà¸£à¸²à¸£à¸µ MediaPipe à¸ªà¸³à¸«à¸£à¸±à¸šà¸•à¸£à¸§à¸ˆà¸ˆà¸±à¸šà¸¡à¸·à¸­à¹à¸¥à¸°à¸§à¸²à¸”à¸ à¸²à¸ -->
  <script src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils/camera_utils.js" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@mediapipe/control_utils/control_utils.js" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@mediapipe/drawing_utils/drawing_utils.js" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@mediapipe/hands/hands.js" crossorigin="anonymous"></script>
  
  <!-- à¹‚à¸«à¸¥à¸”à¹„à¸¥à¸šà¸£à¸²à¸£à¸µ Face API à¸ªà¸³à¸«à¸£à¸±à¸šà¸•à¸£à¸§à¸ˆà¸ˆà¸±à¸šà¹ƒà¸šà¸«à¸™à¹‰à¸² -->
  <script src="https://cdn.jsdelivr.net/npm/face-api.js@0.22.2/dist/face-api.min.js" crossorigin="anonymous"></script>
  
  <!-- à¹‚à¸«à¸¥à¸”à¸Ÿà¸­à¸™à¸•à¹Œà¸ˆà¸²à¸ Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&amp;family=Exo+2:wght@300;400;600&amp;display=swap" rel="stylesheet">
  
  <!-- à¸¥à¸´à¸‡à¸à¹Œà¹„à¸›à¸¢à¸±à¸‡à¹„à¸Ÿà¸¥à¹Œ CSS -->
  <link rel="stylesheet" href="style.css">
  
  <!-- à¹‚à¸«à¸¥à¸” Tailwind CSS à¸ªà¸³à¸«à¸£à¸±à¸šà¸ªà¹„à¸•à¸¥à¹Œ -->
  <script src="https://cdn.tailwindcss.com" type="text/javascript"></script>
 </head>
 <body>
  <!-- à¸ªà¹ˆà¸§à¸™à¸«à¸±à¸§à¸‚à¸­à¸‡à¸«à¸™à¹‰à¸²à¹€à¸§à¹‡à¸š -->
  <header class="header">
    <h1 class="title" id="gameTitle">ğŸ Neon Snake Game</h1>
    <p class="subtitle">Control with finger pointing â€¢ Collect food â€¢ Snake wraps around walls!</p>
  </header>
  
  <!-- à¸„à¸­à¸™à¹€à¸—à¸™à¹€à¸™à¸­à¸£à¹Œà¸«à¸¥à¸±à¸à¸ªà¸³à¸«à¸£à¸±à¸šà¹€à¸à¸¡ -->
  <div class="container">
   <div class="game-area">
    <div class="game-panel">
     <div class="game-container">
      <div class="main-stage">
        <!-- à¸à¸¥à¹‰à¸­à¸‡à¹à¸¥à¸°à¸ªà¹ˆà¸§à¸™à¸•à¸£à¸§à¸ˆà¸ˆà¸±à¸šà¸¡à¸·à¸­à¸”à¹‰à¸²à¸™à¸‹à¹‰à¸²à¸¢ -->
        <div class="stage-side left-camera">
          <div style="position: relative; display:flex; justify-content:center;">
            <!-- à¸­à¸‡à¸„à¹Œà¸›à¸£à¸°à¸à¸­à¸šà¸§à¸´à¸”à¸µà¹‚à¸­à¸ªà¸³à¸«à¸£à¸±à¸šà¹à¸ªà¸”à¸‡à¸ à¸²à¸à¸ˆà¸²à¸à¸à¸¥à¹‰à¸­à¸‡ -->
            <video id="videoElement" width="220" height="165" autoplay style="border: 2px solid #00ffff; border-radius: 10px; display: block;"></video>
            <div style="position: absolute; top: 5px; left: 5px; background: rgba(0,0,0,0.7); color: #00ffff; padding: 3px 6px; border-radius: 5px; font-size: 11px;">
              Your Camera
            </div>
          </div>
          <div style="height:12px"></div>
          <div style="position: relative; display:flex; justify-content:center;">
            <!-- à¹à¸„à¸™à¸§à¸²à¸ªà¸ªà¸³à¸«à¸£à¸±à¸šà¹à¸ªà¸”à¸‡à¸à¸²à¸£à¸•à¸£à¸§à¸ˆà¸ˆà¸±à¸šà¸¡à¸·à¸­ -->
            <canvas id="handCanvas" width="220" height="165" style="border: 2px solid #ff00ff; border-radius: 10px; background: rgba(0,0,0,0.5); display: block;"></canvas>
            <div style="position: absolute; top: 5px; left: 5px; background: rgba(0,0,0,0.7); color: #ff00ff; padding: 3px 6px; border-radius: 5px; font-size: 11px;">
              Hand Detection
            </div>
          </div>
        </div>

        <!-- à¸ªà¹ˆà¸§à¸™à¸à¸¥à¸²à¸‡à¸ªà¸³à¸«à¸£à¸±à¸šà¹€à¸à¸¡à¸«à¸¥à¸±à¸ -->
        <div class="stage-center">
          <!-- à¹à¸„à¸™à¸§à¸²à¸ªà¸ªà¸³à¸«à¸£à¸±à¸šà¹€à¸à¸¡ -->
          <canvas id="gameCanvas" width="800" height="480"></canvas>
          <!-- à¸ à¸²à¸à¸—à¸±à¸šà¸‹à¹‰à¸­à¸™à¸ªà¸³à¸«à¸£à¸±à¸šà¸à¸²à¸£à¹€à¸£à¸´à¹ˆà¸¡à¹€à¸à¸¡à¹à¸¥à¸°à¸ˆà¸šà¹€à¸à¸¡ -->
          <div class="game-overlay" id="gameOverlay">
           <div class="overlay-content">
            <h2 id="overlayTitle">ğŸ Ready to Play?</h2>
            <p id="overlayText">Point your finger to control the snake!</p>
            <button class="btn btn-primary" onclick="startGame()" id="startBtn">Start Camera &amp; Game</button>
           </div>
          </div>
        </div>

        <!-- à¸”à¹‰à¸²à¸™à¸‚à¸§à¸²à¸§à¹ˆà¸²à¸‡ (à¸¢à¹‰à¸²à¸¢à¸ªà¹ˆà¸§à¸™à¸•à¸£à¸§à¸ˆà¸ˆà¸±à¸šà¸¡à¸·à¸­à¹„à¸›à¸”à¹‰à¸²à¸™à¸‹à¹‰à¸²à¸¢à¹à¸¥à¹‰à¸§) -->
        <div class="stage-side right-empty" aria-hidden="true"></div>
      </div>
     </div>
     
     <!-- à¸ªà¹ˆà¸§à¸™à¸„à¸§à¸šà¸„à¸¸à¸¡à¹€à¸à¸¡ -->
     <div class="controls">
      <div style="text-align: center; color: #00ffff; margin: 15px 0;">
       <p><strong>ğŸ–ï¸ Hand Control:</strong> Point your index finger to move the snake!</p>
       <p><small>Camera shows your hand tracking â€¢ Pink canvas displays finger position</small></p>
      </div>
      <!-- à¸›à¸¸à¹ˆà¸¡à¸„à¸§à¸šà¸„à¸¸à¸¡à¸ªà¸³à¸«à¸£à¸±à¸šà¸¡à¸·à¸­à¸–à¸·à¸­/à¹à¸—à¹‡à¸šà¹€à¸¥à¹‡à¸• -->
      <div class="control-row"><button class="control-btn" onclick="changeDirection('up')">â†‘</button></div>
      <div class="control-row">
        <button class="control-btn" onclick="changeDirection('left')">â†</button>
        <button class="control-btn" onclick="changeDirection('down')">â†“</button>
        <button class="control-btn" onclick="changeDirection('right')">â†’</button>
      </div>
      <div style="text-align: center; color: #cccccc; margin-top: 10px;">
        <small>Backup: Use arrow keys or buttons above</small>
      </div>
     </div>
    </div>
    
    <!-- à¹à¸œà¸‡à¸ªà¸–à¸´à¸•à¸´à¹à¸¥à¸°à¸à¸²à¸£à¸•à¸±à¹‰à¸‡à¸„à¹ˆà¸² -->
    <div class="stats-panel">
     <h3 class="stats-title">Game Stats</h3>
     <!-- à¸£à¸²à¸¢à¸à¸²à¸£à¸ªà¸–à¸´à¸•à¸´à¸•à¹ˆà¸²à¸‡à¹† -->
     <div class="stat-item"><span class="stat-label">Score</span> <span class="stat-value" id="currentScore">0</span></div>
     <div class="stat-item"><span class="stat-label">High Score</span> <span class="stat-value" id="highScore">0</span></div>
     <div class="stat-item"><span class="stat-label">Food Eaten</span> <span class="stat-value" id="foodCount">0</span></div>
     <div class="stat-item"><span class="stat-label">Length</span> <span class="stat-value" id="snakeLength">1</span></div>
     <div class="stat-item"><span class="stat-label">Level</span> <span class="stat-value" id="currentLevel">1</span></div>
     <div class="stat-item"><span class="stat-label">Target Food</span> <span class="stat-value" id="targetFood">10</span></div>
     
     <!-- à¹à¸–à¸šà¹à¸ªà¸”à¸‡à¸„à¸§à¸²à¸¡à¸„à¸·à¸šà¸«à¸™à¹‰à¸²à¹€à¸¥à¹€à¸§à¸¥ -->
     <div class="level-progress">
      <div class="level-fill" id="levelProgress" style="width: 0%;"></div>
     </div>
     <div style="text-align: center; color: #cccccc; margin-top: 5px;">
       <small id="progressText">Collect 10 food to advance to Level 2</small>
     </div>
     
     <!-- à¸à¸²à¸£à¹€à¸¥à¸·à¸­à¸à¸£à¸°à¸”à¸±à¸šà¸„à¸§à¸²à¸¡à¸¢à¸²à¸ -->
     <div class="difficulty-select">
       <label style="color: #ffffff; font-weight:600; margin-right:6px;">Difficulty:</label>
       <button class="btn" id="diffEasy" onclick="setDifficulty('easy')" style="background: linear-gradient(45deg, #22c55e, #16a34a);">Easy</button>
       <button class="btn" id="diffMedium" onclick="setDifficulty('medium')" style="background: linear-gradient(45deg, #60a5fa, #3b82f6);">Medium</button>
       <button class="btn" id="diffHard" onclick="setDifficulty('hard')" style="background: linear-gradient(45deg, #fb7185, #ef4444);">Hard</button>
     </div>
     
     <!-- à¸›à¸¸à¹ˆà¸¡à¸„à¸§à¸šà¸„à¸¸à¸¡à¹€à¸à¸¡ -->
     <div class="game-actions">
       <button class="btn btn-primary" onclick="startGame()" id="playBtn">
         <span class="loading" id="playLoadingSpinner" style="display: none;"></span>
         <span id="playBtnText">New Game</span>
       </button>
       <button class="btn btn-secondary" onclick="pauseGame()" id="pauseBtn">
         <span id="pauseBtnText">Pause</span>
       </button>
       <button class="btn" onclick="showTutorial()" style="background: linear-gradient(45deg, #ffff00, #ff8000); color: #000; box-shadow: 0 0 20px rgba(255, 255, 0, 0.3); margin-top: 10px;">
         ğŸ“š How to Play
       </button>
     </div>
     
     <!-- à¸ªà¹ˆà¸§à¸™à¸ªà¸³à¸«à¸£à¸±à¸šà¹à¸ªà¸”à¸‡à¸„à¸§à¸²à¸¡à¸ªà¸³à¹€à¸£à¹‡à¸ˆ -->
     <div id="achievements"></div>
    </div>
   </div>
   
   <!-- à¹‚à¸¡à¸”à¸­à¸¥à¸ªà¸­à¸™à¸§à¸´à¸˜à¸µà¸à¸²à¸£à¹€à¸¥à¹ˆà¸™ -->
   <div id="tutorialModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); z-index: 1000; padding: 20px; overflow-y: auto;">
    <div style="max-width: 800px; margin: 0 auto; background: linear-gradient(135deg, rgba(0, 50, 100, 0.9), rgba(50, 0, 100, 0.9)); border-radius: 20px; padding: 30px; border: 2px solid #00ffff; box-shadow: 0 0 30px rgba(0, 255, 255, 0.3);">
     <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px;">
      <h2 style="font-family: 'Orbitron', monospace; color: #00ffff; font-size: 2rem; margin: 0;">ğŸ How to Play</h2>
      <button onclick="closeTutorial()" style="background: #ff0040; color: white; border: none; border-radius: 50%; width: 40px; height: 40px; font-size: 1.5rem; cursor: pointer;">Ã—</button>
     </div>
     <div style="display: grid; gap: 25px;">
      <!-- à¸§à¸±à¸•à¸–à¸¸à¸›à¸£à¸°à¸ªà¸‡à¸„à¹Œà¸‚à¸­à¸‡à¹€à¸à¸¡ -->
      <div style="background: rgba(0,255,255,0.1); padding: 20px; border-radius: 15px; border-left: 4px solid #00ffff;">
       <h3 style="color: #00ffff; margin-bottom: 15px; font-family: 'Orbitron', monospace;">ğŸ¯ Game Objective</h3>
       <p style="color: #cccccc; line-height: 1.6;">Control the neon snake to eat food and grow longer. Avoid hitting your own body! The snake wraps around walls, so you won't die from hitting edges.</p>
      </div>
      
      <!-- à¸à¸²à¸£à¸„à¸§à¸šà¸„à¸¸à¸¡à¸”à¹‰à¸§à¸¢à¸¡à¸·à¸­ -->
      <div style="background: rgba(255,0,255,0.1); padding: 20px; border-radius: 15px; border-left: 4px solid #ff00ff;">
       <h3 style="color: #ff00ff; margin-bottom: 15px; font-family: 'Orbitron', monospace;">ğŸ–ï¸ Hand Controls</h3>
       <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 15px;">
        <div style="text-align: center; color: #cccccc;">
         <div style="font-size: 2rem; margin-bottom: 10px;">ğŸ‘†</div>
         <p><strong>Point Up:</strong> Snake moves up</p>
        </div>
        <div style="text-align: center; color: #cccccc;">
         <div style="font-size: 2rem; margin-bottom: 10px;">ğŸ‘‡</div>
         <p><strong>Point Down:</strong> Snake moves down</p>
        </div>
        <div style="text-align: center; color: #cccccc;">
         <div style="font-size: 2rem; margin-bottom: 10px;">ğŸ‘ˆ</div>
         <p><strong>Point Right:</strong> Snake moves left</p>
        </div>
        <div style="text-align: center; color: #cccccc;">
         <div style="font-size: 2rem; margin-bottom: 10px;">ğŸ‘‰</div>
         <p><strong>Point Left:</strong> Snake moves right</p>
        </div>
       </div>
       <p style="color: #ffff00; text-align: center; margin-top: 15px; font-size: 0.9rem;"><strong>Note:</strong> Camera is mirrored like a selfie camera</p>
      </div>
      
      <!-- à¸à¸²à¸£à¸„à¸§à¸šà¸„à¸¸à¸¡à¸”à¹‰à¸§à¸¢à¸„à¸µà¸¢à¹Œà¸šà¸­à¸£à¹Œà¸” -->
      <div style="background: rgba(255,255,0,0.1); padding: 20px; border-radius: 15px; border-left: 4px solid #ffff00;">
       <h3 style="color: #ffff00; margin-bottom: 15px; font-family: 'Orbitron', monospace;">âŒ¨ï¸ Keyboard Controls</h3>
       <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; text-align: center;">
        <div style="background: rgba(255,255,255,0.1); padding: 10px; border-radius: 8px; color: #cccccc;">
         <div style="font-weight: bold;">â†‘</div><small>Up</small>
        </div>
        <div style="background: rgba(255,255,255,0.1); padding: 10px; border-radius: 8px; color: #cccccc;">
         <div style="font-weight: bold;">â†“</div><small>Down</small>
        </div>
        <div style="background: rgba(255,255,255,0.1); padding: 10px; border-radius: 8px; color: #cccccc;">
         <div style="font-weight: bold;">â†</div><small>Left</small>
        </div>
        <div style="background: rgba(255,255,255,0.1); padding: 10px; border-radius: 8px; color: #cccccc;">
         <div style="font-weight: bold;">â†’</div><small>Right</small>
        </div>
       </div>
      </div>
      
      <!-- à¸à¸²à¸£à¹ƒà¸«à¹‰à¸„à¸°à¹à¸™à¸™à¹à¸¥à¸°à¹€à¸¥à¹€à¸§à¸¥ -->
      <div style="background: rgba(0,255,0,0.1); padding: 20px; border-radius: 15px; border-left: 4px solid #00ff00;">
       <h3 style="color: #00ff00; margin-bottom: 15px; font-family: 'Orbitron', monospace;">ğŸ† Scoring &amp; Levels</h3>
       <ul style="color: #cccccc; line-height: 1.8; list-style: none; padding: 0;">
        <li>ğŸ’ <strong>+10 points</strong> for each diamond food eaten</li>
        <li>ğŸ“ˆ <strong>Level up</strong> every 10 food collected</li>
        <li style="border-top: #ffff00;">ğŸ§˜ <strong style="color: #ffff00;">FACE YOGA CHALLENGE:</strong> After leveling up, you must copy the example pose to continue!</li>
        <li>âš¡ <strong>Speed increases</strong> with each level</li>
        <li>ğŸ… <strong>Achievements</strong> unlock at milestone scores</li>
       </ul>
      </div>
      
      <!-- à¸à¸²à¸£à¸—à¹‰à¸²à¸—à¸²à¸¢ Face Yoga -->
      <div style="background: rgba(255, 255, 0, 0.1); padding: 20px; border-radius: 15px; border-left: 4px solid #ffff00;">
        <h3 style="color: #ffff00; margin-bottom: 10px; font-family: 'Orbitron', monospace;">â­ Level Up Challenge (Face Yoga)</h3>
        <p style="color: #cccccc; line-height: 1.8; margin-bottom: 10px;">
          To advance to the next level, you must complete a <strong>Face Yoga Challenge!</strong>
          <br>This is a fun break to stretch your facial muscles before the game gets faster.
        </p>
        <ul style="color: #cccccc; line-height: 1.4; list-style: none; padding-left: 0;">
          <li>â¸ï¸ When you level up, the game will <strong>pause</strong>.</li>
          <li>ğŸ–¼ï¸ A new window will show an example pose (like "Puff Cheeks" or "Wide Eyes").</li>
          <li>ğŸ¤– Your camera will show a <strong>face skeleton</strong> to help guide you.</li>
          <li>ğŸ¯ Your mission: <strong>Copy the example pose</strong> until the AI detects a match.</li>
          <li>ğŸš€ Once you succeed, the game resumes at the <strong>new, faster speed!</strong></li>
          <li>ğŸ¯ To pass, your Similarity Score must beat the Required Percentage. Match the pose to continue!</li>
        </ul>
        <div style="display: flex; justify-content: space-between; gap: 10px; margin-top: 15px;">
          <img src="picture/how to1.png" alt="Example pose 1" style="width: 32%; border-radius: 8px; border: 1px solid #ffff00;">
          <img src="picture/how to2.png" alt="Example pose 2" style="width: 32%; border-radius: 8px; border: 1px solid #ffff00;">
          <img src="picture/how to3.png" alt="Example pose 3" style="width: 32%; border-radius: 8px; border: 1px solid #ffff00;">
        </div>
      </div>
      
      <!-- à¸¥à¸¹à¸à¸šà¸­à¸¥à¹„à¸Ÿà¸Ÿà¹‰à¸² -->
      <div style="background: rgba(255,0,0,0.1); padding: 20px; border-radius: 15px; border-left: 4px solid #ff0000;">
       <h3 style="color: #ff0000; margin-bottom: 15px; font-family: 'Orbitron', monospace;">âš¡ Electric Orbs (Level 2+)</h3>
       <ul style="color: #cccccc; line-height: 1.8; list-style: none; padding: 0;">
        <li>âš¡ <strong>Red electric orbs</strong> appear from Level 2</li>
        <li>ğŸ’¥ <strong>Touching them:</strong> Lose 1 point + Snake shrinks by 1 segment</li>
        <li>ğŸ¯ <strong>30% spawn chance</strong> after eating food</li>
        <li>âš ï¸ <strong>Avoid them!</strong> They have lightning effects around them</li>
       </ul>
      </div>
      
      <!-- à¸à¸à¸‚à¸­à¸‡à¹€à¸à¸¡ -->
      <div style="background: rgba(255,100,100,0.1); padding: 20px; border-radius: 15px; border-left: 4px solid #ff6464;">
       <h3 style="color: #ff6464; margin-bottom: 15px; font-family: 'Orbitron', monospace;">âš ï¸ Game Rules</h3>
       <ul style="color: #cccccc; line-height: 1.8; list-style: none; padding: 0;">
        <li>ğŸš« <strong>Don't hit yourself:</strong> Game over if snake touches its own body</li>
        <li>ğŸŒ€ <strong>Wall wrapping:</strong> Snake goes through walls safely</li>
        <li>ğŸ’ <strong>Eat diamonds:</strong> +10 points, snake grows longer</li>
        <li>âš¡ <strong>Avoid electric orbs:</strong> -1 point, snake shrinks (Level 2+)</li>
        <li>â¸ï¸ <strong>Pause anytime:</strong> Use the pause button during gameplay</li>
        <li>ğŸ® <strong>No movement = safe:</strong> Snake won't die if you don't move</li>
       </ul>
      </div>
     </div>
     <div style="text-align: center; margin-top: 30px;">
       <button onclick="closeTutorial()" class="btn btn-primary" style="padding: 15px 30px; font-size: 1.1rem;"> ğŸš€ Start Playing! </button>
     </div>
    </div>
   </div>
  </div>

  <!-- à¹‚à¸«à¸¥à¸”à¹„à¸Ÿà¸¥à¹Œ JavaScript -->
  <script src="script.js"></script>
 </body>
</html>